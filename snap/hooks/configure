#!/bin/sh -e

# Run uploader so we can start adding images

usr/bin/python3 $SNAP/bin/uploader.py

# Set imv wait time before showing next picture via snap config

DEFAULT_IMV_DURATION=10
imv_duration="$(snapctl get imv-duration)"

if ! expr "$imv_duration" : '^[0-9]*$' > /dev/null; then
    echo "\"$imv_duration\" is not a valid duration, reveting to $DEFAULT_IMV_DURATION seconds" >&2
    snapctl set imv-duration="$DEFAULT_IMV_DURATION"
    snapctl restart "$SNAP_NAME".imv
fi
